Описания механики боя.


Каждый новый ход выносливости игроков увеличивается на 3 ед. (Не может превышать максимальное значение.)

Как игрок, так и компьютер могут использовать умение только один раз за бой.
При использовании умения происходит только проверка, достаточно ли выносливости у персонажа, использующего умение.
Все остальные проверки игнорируются.
Если проверка пройдена успешно, тогда вычитаем очки здоровья цели в соответствии с примененным умением.

Когда компьютер выполняет ответное действие, он имеет 10%-ный шанс воспользоваться умением.
Если шанс срабатывает, а умение уже было применено, то компьютер наносит обычный удар.

При нажатии на кнопку происходит проверка, достаточно ли у персонажа выносливости, чтобы нанести удар.
Если выносливости недостаточно, пропускаем ход. Если достаточно, тогда переходим к расчету количества урона.
Урон рассчитывается следующим образом:
УРОН = УРОН_АТАКУЮЩЕГО - БРОНЯ_ЦЕЛИ

Формула для расчета значения БРОНЯ_ЦЕЛИ приведена ниже.
урон_от_оружия = случайное число в диапазоне (min_damage - max_damage)
УРОН_АТАКУЮЩЕГО = урон_от_оружия * модификатор_атаки_класса


Далее перед тем, как рассчитать броню цели, необходимо провести проверку на выносливость.
Как мы помним, броня имеет характеристику stamina_per_turn.

Если у персонажа, которого атакуют, достаточно очков выносливости для использования своей брони,
тогда рассчитываем показатель брони цели следующим образом:
БРОНЯ_ЦЕЛИ = надетая_броня * модификатор_брони_класса

Если у персонажа, которого атакуют, очков выносливости для использования своей брони недостаточно,
тогда его броня игнорируется. После того, как все расчеты произведены, вычитаем из очков здоровья цели
показатель рассчитанного урона

Как рассчитывается выносливость в бою
В каждом бою у нас будет задана константа, сколько очков выносливости персонаж восстанавливает за ход.
Таким образом, в целом расчет выносливости выглядит следующим образом:
У атакующего вычитаем количество затраченной выносливости на удар (stamina_per_hit).
У защищающегося вычитаем количество затраченной выносливости за защиту (stamina_per_turn).

Восстанавливаем выносливость атакующего и защищающего:
Прибавляем к очкам выносливости атакующего константу, умноженную на модификатор выносливости атакующего.
Прибавляем к очкам выносливости цели константу, умноженную на модификатор выносливости цели.
После того, как все расчеты произведены, компьютерный противник наносит ответный удар, который рассчитывается
аналогичным образом

